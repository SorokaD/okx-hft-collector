# OKX HFT Collector
upd 23.10.25 –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å infra, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –≤ tg –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ collector
upd 25.10.25 –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤ clickhouse —Å–æ–±–∏—Ä–∞—é—Ç—Å—è 3 —Ç–∞–±–ª–∏—Ü—ã 
upd 28.10.25 –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤ clickhouse —Å–æ–±–∏—Ä–∞—é—Ç—Å—è 5 —Ç–∞–±–ª–∏—Ü, —Ä–∞–±–æ—Ç–∞—é—Ç alerts (—Ç–æ—Ä–º–æ–∑), –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å –ø–æ—Ä—Ç–∞–º–∏ okx_hft_infra

–í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å –±–∏—Ä–∂–∏ OKX –¥–ª—è —Å–±–æ—Ä–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞–∫–∞–Ω–æ–≤ –∑–∞—è–≤–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ OKX –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–°–±–æ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** (trades) –¥–ª—è BTC-USDT –∏ ETH-USDT
- **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–∫–∞–Ω–∞ –∑–∞—è–≤–æ–∫** (orderbook) 
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ ClickHouse** —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã** —á–µ—Ä–µ–∑ Prometheus + Alertmanager
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ë–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
OKX WebSocket ‚Üí Collector ‚Üí ClickHouse
                     ‚Üì
              Prometheus ‚Üí Alertmanager ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- 8+ GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- 4+ GB RAM

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd okx-hft-collector
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
```bash
cd docker
docker-compose up -d
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
```bash
docker-compose ps
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| ClickHouse | 8123, 9000 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| Collector | 9108 | –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö |
| Prometheus | 9090 | –°–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ |
| Alertmanager | 9093 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ |

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **Prometheus**: http://localhost:9090
- **Alertmanager**: http://localhost:9093  
- **–ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞**: http://localhost:9108/metrics
- **ClickHouse**: http://localhost:8123

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```prometheus
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –ø–æ –∫–∞–Ω–∞–ª–∞–º
events_total{channel="trades",instId="BTC-USDT"}

# –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è WebSocket
reconnects_total

# –ó–∞–¥–µ—Ä–∂–∫–∞ event loop
event_loop_lag_ms

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ ClickHouse
SELECT COUNT(*) FROM market_raw.trades
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã Prometheus

```promql
# –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
rate(events_total[5m])

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∑–∞ —á–∞—Å
increase(reconnects_total[1h])

# –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
event_loop_lag_ms
```

## üö® –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤

### –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã

| –ê–ª–µ—Ä—Ç | –£—Å–ª–æ–≤–∏–µ | –°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|-------------|----------|
| WebSocketConnectionDown | `increase(reconnects_total[5m]) > 0` | Critical | –†–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å OKX |
| NoDataReceived | `rate(events_total[5m]) == 0` | Critical | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç OKX |
| HighEventLoopLag | `event_loop_lag_ms > 100` | Warning | –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| DataInsertionErrors | `increase(events_total{channel="unknown"}[5m]) > 10` | Warning | –û—à–∏–±–∫–∏ –≤—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö |
| CollectorDown | `up{job="okx-collector"} == 0` | Critical | –ö–æ–ª–ª–µ–∫—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |
| ClickHouseDown | `up{job="clickhouse"} == 0` | Critical | ClickHouse –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### Telegram (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ chat ID
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `docker/`:
```bash
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```bash
docker-compose up -d alert-webhook
```

#### Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker/alertmanager.yml`:
```yaml
receivers:
  - name: 'email-alerts'
    email_configs:
      - to: 'admin@example.com'
        subject: 'OKX Collector Alert'
        smtp_config:
          smarthost: 'smtp.gmail.com:587'
          auth_username: 'your_email@gmail.com'
          auth_password: 'your_app_password'
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ trades

```sql
CREATE TABLE market_raw.trades (
    instId String,           -- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (BTC-USDT, ETH-USDT)
    ts_event_ms UInt64,      -- –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è –æ—Ç OKX (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
    tradeId String,          -- ID —Å–¥–µ–ª–∫–∏
    px Float64,              -- –¶–µ–Ω–∞
    sz Float64,              -- –†–∞–∑–º–µ—Ä
    side String,             -- –°—Ç–æ—Ä–æ–Ω–∞ (buy/sell)
    ts_ingest_ms UInt64      -- –í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
) ENGINE = MergeTree()
ORDER BY (instId, ts_event_ms, tradeId)
```


## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `INSTRUMENTS` | `["BTC-USDT","ETH-USDT"]` | –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ |
| `CHANNELS` | `["books-l2-tbt","trades"]` | –ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö |
| `OKX_WS_URL` | `wss://ws.okx.com:8443/ws/v5/public` | URL WebSocket OKX |
| `CLICKHOUSE_DSN` | `http://clickhouse:8123` | DSN ClickHouse |
| `BATCH_MAX_SIZE` | `5000` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ |
| `FLUSH_INTERVAL_MS` | `150` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (–º—Å) |
| `METRICS_PORT` | `9108` | –ü–æ—Ä—Ç –¥–ª—è –º–µ—Ç—Ä–∏–∫ |
| `LOG_LEVEL` | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```yaml
# –í docker-compose.yml
environment:
  BATCH_MAX_SIZE: "10000"      # –ë–æ–ª—å—à–µ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞—Ç—á–µ
  FLUSH_INTERVAL_MS: "100"     # –ß–∞—â–µ –æ—Ç–ø—Ä–∞–≤–∫–∞
```

#### –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

```yaml
# –°–±–æ—Ä —Ç–æ–ª—å–∫–æ —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
CHANNELS: '["trades"]'

# –ú–µ–Ω—å—à–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
INSTRUMENTS: '["BTC-USDT"]'
```

## üìä –û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö

### –û–∂–∏–¥–∞–µ–º—ã–π –æ–±—ä–µ–º –∑–∞ —Å—É—Ç–∫–∏

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ó–∞–ø–∏—Å–µ–π/—Å–µ–∫ | –ó–∞–ø–∏—Å–µ–π/–¥–µ–Ω—å | –†–∞–∑–º–µ—Ä |
|------------|-------------|--------------|---------|
| Trades | ~175 | ~15M | ~1.5 GB |
| Orderbook | ~55 | ~4.7M | ~2.4 GB |
| **–ò—Ç–æ–≥–æ** | ~230 | ~20M | **~4 GB** |

### –ó–∞ –º–µ—Å—è—Ü: ~120 GB
### –ó–∞ –≥–æ–¥: ~1.5 TB

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
docker-compose restart collector

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f collector

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ ClickHouse
curl "http://localhost:8123/?query=SELECT%20version()"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
curl "http://localhost:9108/metrics"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ
curl "http://localhost:8123/?query=SELECT%20COUNT(*)%20FROM%20market_raw.trades"
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
docker-compose down

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ClickHouse
docker volume rm docker_ch-data

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose up -d
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

1. **–ö–æ–ª–ª–µ–∫—Ç–æ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ ClickHouse:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs collector

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å ClickHouse
curl "http://localhost:8123/?query=SELECT%20version()"
```

2. **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ ClickHouse:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
docker-compose logs --tail=50 collector

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏
curl "http://localhost:9108/metrics" | grep events_total
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

1. **–í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ event loop:**
   - –£–≤–µ–ª–∏—á—å—Ç–µ `BATCH_MAX_SIZE`
   - –£–º–µ–Ω—å—à–∏—Ç–µ `FLUSH_INTERVAL_MS`
   - –û—Ç–∫–ª—é—á–∏—Ç–µ –∫–∞–Ω–∞–ª orderbook

2. **–ú–Ω–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –∫–æ–¥–µ

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–ª–µ—Ä—Ç–∞–º–∏

1. **–ê–ª–µ—Ä—Ç—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Alertmanager
curl "http://localhost:9093/api/v2/status"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ Prometheus
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ http://localhost:9090/alerts
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

- `DEBUG` - –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `INFO` - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `WARNING` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –û—à–∏–±–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs collector
docker-compose logs clickhouse

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f collector

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100 collector
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ø–æ—Ä—Ç–∞–º 9090, 9093 (Prometheus, Alertmanager)
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** Docker –æ–±—Ä–∞–∑—ã
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã** —Å–∏—Å—Ç–µ–º—ã

### –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
ufw allow 8123  # ClickHouse (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø)
ufw allow 9108  # –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OKX WebSocket API Documentation](https://www.okx.com/docs-v5/en/#websocket-api)
- [ClickHouse Documentation](https://clickhouse.com/docs/)
- [Prometheus Documentation](https://prometheus.io/docs/)
- [Docker Compose Reference](https://docs.docker.com/compose/)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏: http://localhost:9108/metrics
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–ª–µ—Ä—Ç—ã: http://localhost:9093
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –û–∫—Ç—è–±—Ä—å 2025